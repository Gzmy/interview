## 多路转接之select, epoll
### select和epoll的优缺点？
- select
	- select支持多路转接，select使用三个集合记录可读，可写，以及异常事件，这三个参数都是输入输出型参数
	当事件发生时由内核进行修改，select每次都是返回已经就绪的文件描述符，没有就绪的文件描述符都被清除，所以
	在每次调用select之前都需要重新添加要监控的文件描述符
	- 对于返回的文件描述符集合都需要重新遍历，时间复杂度是O(N)，文件描述符增多，性能随之下降
	- select监控的文件描述符有限制，由fd_set决定，默认是1024，select每次都是把用户态的文件描述符拷贝到内核态，
	文件描述符增多，开销变大
	- select监控的时间可以达到微秒级
	- select适用于监听的文件描述符多，但是同一时间活跃的描述符少
- epoll
	- epoll通过epoll_create创建一个句柄，在内核中以红黑树的形式记录要检测的文件描述符，由内核进行维护，一旦文件
	描述符就绪，就采取一种回调机制，将就绪的文件描述符添加到一个就绪队列中，使用内存映射技术，减少了文件描述符在
	系统中复制的开销，用户每次都是在就绪队列中拿对应的文件描述符，时间复杂度是O(1)
	- epoll工作模式有ET和LT两种，LT模式下内核会通知多次，ET模式下只通知一次(下次返回时如果还是这么多数据就不通知，有新数据
			到来还是会通知)，所以ET模式下必须将文件描述符设置成非阻塞的，否则写端没有关闭，读端一直阻塞，循环读取到EAGAIN
	才退出
	- epoll能检测的文件描述符数量是可以打开的最大的文件数量，Linux下是10万多
	- `EPOLLONSHOT`:在多线程模型中，一个线程读取完一个socket上的数据开始处理这些数据，在数据的处理过程中又有新的数据可以读
	另一个线程被唤醒来处理这些数据，就出现一个socket被两个线程处理的局面，我们期望一个socket在任何一个时刻都只被一个线程处理
	可以使用 `EPOLLONESHOT`,对于注册了`EPOLLONESHOT`的事件，操作系统最多只触发其注册上的一个可读，可写，异常事件，并且只触发一次

